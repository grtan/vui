{"version":3,"sources":["webpack:///../src/modules/scroll-bottom/demo/index.vue?c9b1","webpack:///../src/modules/scroll-bottom/index.ts","webpack:///../src/modules/scroll-bottom/demo/index.vue?6337","webpack:///../src/modules/scroll-bottom/demo/index.vue?290e","webpack:///../src/modules/scroll-bottom/demo/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","_v","staticRenderFns","unbind","el","_bottom","handler","removeEventListener","inserted","binding","modifiers","once","value","Math","round","scrollTop","clientHeight","scrollHeight","addEventListener","passive","directive","install","Vue","VuiTest","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,WAAW,CAAC,CAACC,KAAK,WAAWC,QAAQ,gBAAgB,CAACR,EAAIS,GAAG,WACnKC,EAAkB,G,4DCEtB,SAASC,EAAOC,GACd,GAAKA,EAAGC,QAAR,CAD6B,IAGrBC,EAAYF,EAAGC,QAAfC,QAERF,EAAGG,oBAAoB,SAAUD,UAC1BF,EAAGC,SAGZ,SAASG,EAASJ,EAAiBK,GAA6B,kBACrCA,EAAQC,iBAD6B,QAChB,GADgB,IACtDC,YADsD,SAExDC,EAAQH,EAAQG,MAEtB,GAAKA,EAAL,CAEA,IAAMN,EAAU,WAEVO,KAAKC,MAAMV,EAAGW,WAAaX,EAAGY,cAAgBZ,EAAGa,aAAe,IAClEL,IACAD,GAAQR,EAAOC,KAInBA,EAAGc,iBAAiB,SAAUZ,EAAS,CAAEa,SAAS,IAElDf,EAAGC,QAAU,CACXC,YAIJ,IAAMc,EAA0B,CAC9BZ,WACAL,SACAkB,QAH8B,SAGtBC,GACNA,EAAIF,UAAU,oBAAqBA,KAIxB,IC5BM,EAArB,qIAAwC,QAAnB,EAAU,gBAL9B,eAAU,CACTtB,WAAY,CACVyB,QAAA,MAGiB,WCb6a,I,YCO9bC,EAAY,eACd,EACAjC,EACAW,GACA,EACA,KACA,KACA,MAIa,aAAAsB,E","file":"js/chunk-2d0c5ab8.1260b539.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"vui-test\",rawName:\"v-vui-test\"}]},[_vm._v(\"xxxx\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { VuiDirective } from '@/types/module'\nimport { ScrollVNodeDirective } from '../scroll/interface'\n\nfunction unbind(el: HTMLElement) {\n  if (!el._bottom) return\n\n  const { handler } = el._bottom\n\n  el.removeEventListener('scroll', handler)\n  delete el._bottom\n}\n\nfunction inserted(el: HTMLElement, binding: ScrollVNodeDirective) {\n  const { once = false } = binding.modifiers ?? {}\n  const value = binding.value\n\n  if (!value) return\n\n  const handler = () => {\n    // -1是为了 解决在安卓6等部分机型下，scrollHeight四舍五入导致计算偏差问题\n    if (Math.round(el.scrollTop) + el.clientHeight >= el.scrollHeight - 1) {\n      value()\n      once && unbind(el)\n    }\n  }\n\n  el.addEventListener('scroll', handler, { passive: true })\n\n  el._bottom = {\n    handler\n  }\n}\n\nconst directive: VuiDirective = {\n  inserted,\n  unbind,\n  install(Vue) {\n    Vue.directive('vui-scroll-bottom', directive)\n  }\n}\n\nexport default directive\n","\n\n\n\n\nimport { Vue, Component } from 'vue-property-decorator'\nimport VuiTest from '../index'\n\n@Component({\n  directives: {\n    VuiTest\n  }\n})\nexport default class VComponent extends Vue {}\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/ts-loader/index.js??ref--14-3!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/ts-loader/index.js??ref--14-3!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=72effd22&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}