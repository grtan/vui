{"version":3,"sources":["webpack:///../src/modules/intersect/demo/index.vue?4f15","webpack:///../src/modules/intersect/index.ts","webpack:///../src/modules/intersect/demo/index.vue?f09a","webpack:///../src/modules/intersect/demo/index.vue?bb86","webpack:///../src/modules/intersect/demo/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","_v","staticRenderFns","unbind","el","_intersect","observer","unobserve","inserted","binding","modifiers","value","handler","options","IntersectionObserver","entries","isIntersecting","Boolean","find","entry","init","once","observe","directive","install","Vue","VuiTest","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,WAAW,CAAC,CAACC,KAAK,WAAWC,QAAQ,gBAAgB,CAACR,EAAIS,GAAG,WACnKC,EAAkB,G,8FCGtB,SAASC,EAAOC,GACTA,EAAGC,aAERD,EAAGC,WAAWC,SAASC,UAAUH,UAC1BA,EAAGC,YAGZ,SAASG,EAASJ,EAAiBK,GAA8B,MACzDC,EAAS,UAAGD,EAAQC,iBAAX,QAAwB,GACjCC,EAAQF,EAAQE,MAFyC,EAGjB,WAAjB,eAAOA,GAAqBA,EAAQ,CAAEC,QAASD,EAAOE,QAAS,IAApFD,EAHuD,EAGvDA,QAASC,EAH8C,EAG9CA,QACXP,EAAW,IAAIQ,sBAAqB,SAACC,EAAsCT,GAC/E,GAAKF,EAAGC,WAAR,CAEA,IAAMW,EAAiBC,QAAQF,EAAQG,MAAK,SAAAC,GAAK,OAAIA,EAAMH,mBAGvDJ,GAAWR,EAAGC,WAAWe,MAAMR,EAAQG,EAAST,EAAUU,GAE1DZ,EAAGC,WAAWe,MAAQV,EAAUW,KAAMlB,EAAOC,GAE5CA,EAAGC,WAAWe,MAAO,KACzBP,GAEHT,EAAGC,WAAa,CAAEe,MAAM,EAAOd,YAE/BA,EAASgB,QAAQlB,GAGnB,IAAMmB,EAA0B,CAC9Bf,WACAL,SACAqB,QAH8B,SAGtBC,GACNA,EAAIF,UAAU,gBAAiBA,KAIpB,IC5BM,EAArB,qIAAwC,QAAnB,EAAU,gBAL9B,eAAU,CACTzB,WAAY,CACV4B,QAAA,MAGiB,WCb6a,I,YCO9bC,EAAY,eACd,EACApC,EACAW,GACA,EACA,KACA,KACA,MAIa,aAAAyB,E","file":"js/chunk-2d21eb95.c2fad9fe.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"vui-test\",rawName:\"v-vui-test\"}]},[_vm._v(\"xxxx\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import 'intersection-observer'\nimport { VuiDirective } from '@/types/module'\nimport ObserveVNodeDirective from '../appear/interface'\n\nfunction unbind(el: HTMLElement) {\n  if (!el._intersect) return\n\n  el._intersect.observer.unobserve(el)\n  delete el._intersect\n}\n\nfunction inserted(el: HTMLElement, binding: ObserveVNodeDirective) {\n  const modifiers = binding.modifiers ?? {}\n  const value = binding.value\n  const { handler, options } = typeof value === 'object' ? value : { handler: value, options: {} }\n  const observer = new IntersectionObserver((entries: IntersectionObserverEntry[], observer: IntersectionObserver) => {\n    if (!el._intersect) return\n\n    const isIntersecting = Boolean(entries.find(entry => entry.isIntersecting))\n\n    // bind 会触发一次回调，所以使用init参数控制，不调用外部的处理函数，只有初始化后，可见性再发生变化时才调用外部处理函数\n    if (handler && el._intersect.init) handler(entries, observer, isIntersecting)\n\n    if (el._intersect.init && modifiers.once) unbind(el)\n    // 如果检测到once参数，在初始化后执行一次后取消监听\n    else el._intersect.init = true\n  }, options)\n\n  el._intersect = { init: false, observer }\n\n  observer.observe(el)\n}\n\nconst directive: VuiDirective = {\n  inserted,\n  unbind,\n  install(Vue) {\n    Vue.directive('vui-intersect', directive)\n  }\n}\n\nexport default directive\n","\n\n\n\n\nimport { Vue, Component } from 'vue-property-decorator'\nimport VuiTest from '../index'\n\n@Component({\n  directives: {\n    VuiTest\n  }\n})\nexport default class VComponent extends Vue {}\n","import mod from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/ts-loader/index.js??ref--14-3!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../demo/node_modules/thread-loader/dist/cjs.js!../../../../demo/node_modules/babel-loader/lib/index.js!../../../../demo/node_modules/ts-loader/index.js??ref--14-3!../../../../demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../demo/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4ec66296&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../demo/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}