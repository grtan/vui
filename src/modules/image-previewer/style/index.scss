@use '../../../skin/var' as *;
@use '../../../skin/common/mixin' as *;
@use '../../../skin/common/function' as *;
@use '../../overlayer/style/index' as *;
@use '../../button/style/index' as *;
// 从npm包中引入文件，需要加~前缀
@use "~photoswipe/src/css/main-settings" as *;
@import "~photoswipe/dist/photoswipe.css";
@import "~photoswipe/dist/default-skin/default-skin.css";

@include b(image-previewer) {
  @include e(overlayer) {
    visibility: hidden;
  }

  @include e(placeholder) {
    display: none;
  }

  @include e(error) {
    background: url("../image/error.png") center top / auto $image-previewer-error-padding-top no-repeat;
    height: auto !important;
    padding-top: $image-previewer-error-padding-top;
    position: absolute;
    text-align: center;
    top: 50%;
    transform: translateY(-50%);
    width: 100% !important;
  }

  @include e(reload) {
    margin: $image-previewer-reload-margin-top;
  }

  @include e(download) {
    background: url(../image/download.png) center / contain no-repeat;
    bottom: $image-previewer-download-bottom;
    cursor: pointer;
    display: none;
    height: $image-previewer-download-height;
    opacity: 0.75;
    position: absolute;
    right: $image-previewer-download-right;
    transition: opacity $pswp__controls-transition-duration cubic-bezier(0.4, 0, 0.22, 1);
    width: $image-previewer-download-width;

    .pswp__ui--idle & {
      opacity: 0;
    }
  }

  // pc端样式
  @include pc {
    .pswp__top-bar {
      transform: none;
    }

    // 保证loading icon水平居中
    .pswp__preloader {
      left: 50%;
      top: 0;
      transform: none;
    }

    &.pswp--css_animation {
      .pswp__preloader__cut {
        height: 14px;
        left: 0;
        top: 0;
        width: 7px;
      }
    }

    .pswp__button--arrow--left {
      transform: none;
    }

    .pswp__button--arrow--right {
      transform: none;
    }

    .pswp__counter {
      bottom: $image-previewer-counter-bottom-pc;
      font-size: $image-previewer-counter-font-size-pc;
      height: auto;
      left: $image-previewer-counter-left-pc;
      line-height: $image-previewer-counter-line-height-pc;
    }
  }

  // 移动端放大按钮
  .pswp__top-bar {
    transform: scale($image-previewer-button-scale);
    transform-origin: right top;
  }

  // 保证loading icon水平、垂直居中
  .pswp__preloader {
    left: 80%;
    top: 20vh;
    transform: translateY(-50%);
  }

  // 设置loading icon尺寸及位置
  &.pswp--css_animation {
    .pswp__preloader__cut {
      height: 56px;
      left: -21px;
      top: -21px;
      width: 28px;
    }

    .pswp__preloader__donut {
      height: 100%;
      width: 200%;
    }
  }

  .pswp__button--arrow--left {
    transform: scale($image-previewer-button-scale);
    transform-origin: left center;
  }

  .pswp__button--arrow--right {
    transform: scale($image-previewer-button-scale);
    transform-origin: right center;
  }

  .pswp__counter {
    bottom: $image-previewer-counter-bottom;
    // 防止只有一张图片时隐藏
    display: block !important;
    font-size: $image-previewer-counter-font-size;
    left: $image-previewer-counter-left;
    line-height: $image-previewer-counter-line-height;
    padding: 0;
    top: auto;
  }
}
