@import "../../../assets/style/base";
@import "../../../assets/style/default/index";

@name: ~"@{lib-name}-load-more";
@position: ~"@{lib-name}-position";
@pull: ~"@{lib-name}-pull";
@loading: ~"@{lib-name}-loading";
@complete: ~"@{lib-name}-complete";

@keyframes rotate {
  to {
    transform: rotate(360deg);
  }
}

// 加载完成后文本动画
@keyframes zoom {
  from {
    opacity: 0;
    transform: scale(0);
  }

  50% {
    transform: scale(1.1);
  }

  to {
    transform: none;
  }
}

// 加载完成后背景动画
@keyframes zoom-horz {
  from {
    left: 50%;
    right: 50%;
    border-radius: 50%;
  }

  to {
    left: 0;
    right: 0;
    border-radius: 0;
  }
}

@keyframes zoom-horz {
  from {
    left: 50%;
    right: 50%;
    border-radius: 50%;
  }

  to {
    left: 0;
    right: 0;
    border-radius: 0;
  }
}

@keyframes zoom-vert {
  from {
    top: 50%;
    bottom: 50%;
    border-radius: 50%;
  }

  to {
    top: 0;
    bottom: 0;
    border-radius: 0;
  }
}

html:not([@{skin-attr}]) {
  .@{name} {
    overflow: auto;
    display: flex;

    &-loading {
      position: relative;
      overflow: hidden;
      flex: none;

      &-box {
        position: absolute;
      }
    }

    &-default {
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      z-index: 0;
    }

    &-bg {
      position: absolute;
      z-index: -1;
      animation: .3s both;
    }

    &-icon {
      width: @loading-more-pull-icon-size;
      height: @loading-more-pull-icon-size;
      background: center no-repeat;
      background-size: 56%;
    }

    &:not([@{pull}]) {
      .@{name}-icon {
        margin: @loading-more-scroll-icon-spacing;
        width: @loading-more-scroll-icon-size;
        height: @loading-more-scroll-icon-size;
        background-size: contain;
      }
    }

    &[@{pull}][@{loading}] {
      .@{name}-icon {
        animation: rotate .7s linear infinite both;
      }
    }

    &-text {
      font-size: @loading-more-font-size;
      overflow-wrap: break-word;
    }

    &[@{complete}] {
      .@{name}-text {
        animation: zoom .4s both;
      }
    }

    &-content {
      flex: none;
    }

    &[@{position}=left],
    &[@{position}=right] {
      .@{name}-loading-box {
        top: 0;
        bottom: 0;
        right: 0;
      }

      .@{name}-default {
        width: @loading-more-pull-size;
        height: 100%;
        flex-direction: column;
      }

      &:not([@{pull}]) {
        .@{name}-default {
          width: @loading-more-scroll-size;
        }
      }

      .@{name}-bg {
        left: 0;
        right: 0;
        animation-name: zoom-vert;
      }

      .@{name}-text {
        width: 1em;
      }
    }

    &[@{position}=right] {
      .@{name}-loading-box {
        right: auto;
        left: 0;
      }
    }

    &[@{position}=top],
    &[@{position}=bottom] {
      flex-direction: column;

      .@{name}-loading-box {
        left: 0;
        right: 0;
        bottom: 0;
      }

      .@{name}-default {
        height: @loading-more-pull-size;
      }

      &:not([@{pull}]) {
        .@{name}-default {
          height: @loading-more-scroll-size;
        }
      }

      .@{name}-bg {
        top: 0;
        bottom: 0;
        animation-name: zoom-horz;
      }
    }

    &[@{position}=bottom] {
      .@{name}-loading-box {
        bottom: auto;
        top: 0;
      }
    }
  }
}